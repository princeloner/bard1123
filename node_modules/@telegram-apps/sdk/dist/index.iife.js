this.telegramApps=this.telegramApps||{};this.telegramApps.sdk=function(r){"use strict";var G;function Gr(e){return{lang:(e==null?void 0:e.lang)??(G==null?void 0:G.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(G==null?void 0:G.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(G==null?void 0:G.abortPipeEarly)}}var Vt;function ju(e){return Vt==null?void 0:Vt.get(e)}var Lt;function Du(e){return Lt==null?void 0:Lt.get(e)}var Ht;function Nu(e,t){var n;return(n=Ht==null?void 0:Ht.get(e))==null?void 0:n.get(t)}function Vu(e){var n,o;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((o=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:o.name))??"null":t}function O(e,t,n,o,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,c=(s==null?void 0:s.received)??Vu(i),u={kind:e.kind,type:e.type,input:i,expected:a,received:c,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??Nu(e.reference,u.lang)??(l?Du(u.lang):null)??o.message??ju(u.lang);p!==void 0&&(u.message=typeof p=="function"?p(u):p),l&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function T(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Gr())}}}function Qr(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Lu(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Rt=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Kr(e){return{kind:"validation",type:"integer",reference:Kr,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&O(this,"integer",t,n),t}}}function Ft(e){return{kind:"transformation",type:"transform",reference:Ft,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Hu(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Ut(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Fe(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Jr(){return{kind:"schema",type:"any",reference:Jr,expects:"any",async:!1,get"~standard"(){return T(this)},"~run"(e){return e.typed=!0,e}}}function Yr(e,t){return{kind:"schema",type:"array",reference:Yr,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return T(this)},"~run"(n,o){var i;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<s.length;a++){const c=s[a],u=this.item["~run"]({value:c},o);if(u.issues){const l={type:"array",origin:"value",input:s,key:a,value:c};for(const p of u.issues)p.path?p.path.unshift(l):p.path=[l],(i=n.issues)==null||i.push(p);if(n.issues||(n.issues=u.issues),o.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else O(this,"type",n,o);return n}}}function Wt(e){return{kind:"schema",type:"boolean",reference:Wt,expects:"boolean",async:!1,message:e,get"~standard"(){return T(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:O(this,"type",t,n),t}}}function zt(e){return{kind:"schema",type:"date",reference:zt,expects:"Date",async:!1,message:e,get"~standard"(){return T(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?O(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:O(this,"type",t,n),t}}}function Gt(e){return{kind:"schema",type:"function",reference:Gt,expects:"Function",async:!1,message:e,get"~standard"(){return T(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:O(this,"type",t,n),t}}}function Zr(e,t){return{kind:"schema",type:"instance",reference:Zr,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return T(this)},"~run"(n,o){return n.value instanceof this.class?n.typed=!0:O(this,"type",n,o),n}}}function D(e,t){return{kind:"schema",type:"loose_object",reference:D,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return T(this)},"~run"(n,o){var i;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const a in this.entries){const c=this.entries[a];if(a in s||(c.type==="exact_optional"||c.type==="optional"||c.type==="nullish")&&c.default!==void 0){const u=a in s?s[a]:Ut(c),l=c["~run"]({value:u},o);if(l.issues){const p={type:"object",origin:"value",input:s,key:a,value:u};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(i=n.issues)==null||i.push(d);if(n.issues||(n.issues=l.issues),o.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(c.fallback!==void 0)n.value[a]=Hu(c);else if(c.type!=="exact_optional"&&c.type!=="optional"&&c.type!=="nullish"&&(O(this,"key",n,o,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:s,key:a,value:s[a]}]}),o.abortEarly))break}if(!n.issues||!o.abortEarly)for(const a in s)Qr(s,a)&&!(a in this.entries)&&(n.value[a]=s[a])}else O(this,"type",n,o);return n}}}function Se(e,t){return{kind:"schema",type:"nullish",reference:Se,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return T(this)},"~run"(n,o){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Ut(this,n,o)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,o)}}}function $e(e){return{kind:"schema",type:"number",reference:$e,expects:"number",async:!1,message:e,get"~standard"(){return T(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:O(this,"type",t,n),t}}}function Ue(e,t){return{kind:"schema",type:"optional",reference:Ue,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return T(this)},"~run"(n,o){return n.value===void 0&&(this.default!==void 0&&(n.value=Ut(this,n,o)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,o)}}}function Xr(e,t,n){return{kind:"schema",type:"record",reference:Xr,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return T(this)},"~run"(o,s){var a,c;const i=o.value;if(i&&typeof i=="object"){o.typed=!0,o.value={};for(const u in i)if(Qr(i,u)){const l=i[u],p=this.key["~run"]({value:u},s);if(p.issues){const y={type:"object",origin:"key",input:i,key:u,value:l};for(const b of p.issues)b.path=[y],(a=o.issues)==null||a.push(b);if(o.issues||(o.issues=p.issues),s.abortEarly){o.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const y={type:"object",origin:"value",input:i,key:u,value:l};for(const b of d.issues)b.path?b.path.unshift(y):b.path=[y],(c=o.issues)==null||c.push(b);if(o.issues||(o.issues=d.issues),s.abortEarly){o.typed=!1;break}}(!p.typed||!d.typed)&&(o.typed=!1),p.typed&&(o.value[p.value]=d.value)}}else O(this,"type",o,s);return o}}}function $(e){return{kind:"schema",type:"string",reference:$,expects:"string",async:!1,message:e,get"~standard"(){return T(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:O(this,"type",t,n),t}}}function xr(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function eo(e,t){return{kind:"schema",type:"union",reference:eo,expects:Lu(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return T(this)},"~run"(n,o){let s,i,a;for(const c of this.options){const u=c["~run"]({value:n.value},o);if(u.typed)if(u.issues)i?i.push(u):i=[u];else{s=u;break}else a?a.push(u):a=[u]}if(s)return s;if(i){if(i.length===1)return i[0];O(this,"type",n,o,{issues:xr(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];O(this,"type",n,o,{issues:xr(a)})}return n}}}function to(){return{kind:"schema",type:"unknown",reference:to,expects:"unknown",async:!1,get"~standard"(){return T(this)},"~run"(e){return e.typed=!0,e}}}function Y(e,t,n){const o=e["~run"]({value:t},Gr(n));if(o.issues)throw new Rt(o.issues);return o.value}function me(...e){return{...e[0],pipe:e,get"~standard"(){return T(this)},"~run"(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o["~run"](t,n))}return t}}}var Ru=Object.defineProperty,Fu=(e,t,n)=>t in e?Ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qt=(e,t,n)=>Fu(e,typeof t!="symbol"?t+"":t,n),Uu=Object.defineProperty,Wu=(e,t,n)=>t in e?Uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zu=(e,t,n)=>Wu(e,t+"",n);function Gu(e,t){return n=>n instanceof e&&n.type===t}function no(e,t){t||(t=[]);const n=Symbol(e);class o extends Error{constructor(...i){const a=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...a),zu(this,"type",n),this.name=e}}return Object.defineProperty(o,"name",{value:e}),[o,Gu(o,n)]}const[ro,oo]=no("CancelledError","Promise was canceled"),[so,Qu]=no("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),io=Symbol("Resolved");function ao(e){return Array.isArray(e)&&e[0]===io}function Ku(e){return[io,e]}function co(e,t){return e.reject=t.reject,e.abort=t.abort,e}let C=class Wr extends Promise{constructor(t,n){let o,s;super((i,a)=>{let c,u;typeof t=="function"?(c=t,u=n):u=t;const l=[],p=_=>(...Ee)=>{const Nt=_(...Ee);return l.forEach(bf=>bf()),Nt},d=new AbortController,{signal:y}=d;s=_=>{!y.aborted&&d.abort(_)};const b=()=>y.reason,Q=_=>{const Ee=()=>{_(b())};y.addEventListener("abort",Ee,!0);const Nt=()=>{y.removeEventListener("abort",Ee,!0)};return l.push(Nt),Nt},Dt=p(_=>{i(_),s(Ku(_))});o=p(_=>{a(_),s(_)}),u||(u={});const{abortSignal:K,rejectOnAbort:Re=!0}=u;if(K)if(K.aborted){const{reason:_}=K;if(Re)return o(_);s(_)}else{const _=()=>{s(K.reason)};K.addEventListener("abort",_),l.push(()=>{K.removeEventListener("abort",_)})}Re&&Q(a);const{timeout:k}=u;if(k){const _=setTimeout(()=>{s(new so(k))},k);l.push(()=>{clearTimeout(_)})}const A=()=>y.aborted,z=()=>ao(b()),J=()=>{const _=b();return ao(_)?_[1]:void 0};try{const _=c&&c(Dt,o,{abortReason:b,abortSignal:y,isAborted:A,isResolved:z,onAborted:Q,onResolved:Ee=>Q(()=>{z()&&Ee(J())}),resolved:J,throwIfAborted(){if(A())throw b()}});_ instanceof Promise&&_.catch(o)}catch(_){o(_)}}),Qt(this,"abort"),Qt(this,"reject"),this.abort=s,this.reject=o}static fn(t,n){return new Wr(async(o,s,i)=>{try{o(await t(i))}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new Wr((n,o)=>{o(t)})}cancel(){this.abort(new ro)}catch(t){return this.then(void 0,t)}finally(t){return co(super.finally(t),this)}then(t,n){return co(super.then(t,n),this)}};function uo(e,t){return e.resolve=t.resolve,e}let lo=class zr extends C{constructor(t,n){let o,s;typeof t=="function"?(o=t,s=n):s=t;let i;super((a,c,u)=>{i=a,o&&o(a,c,u)},s),Qt(this,"resolve"),this.resolve=i}static fn(t,n){return new zr((o,s,i)=>{try{Promise.resolve(t(i)).then(o,s)}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new zr((n,o)=>{o(t)})}catch(t){return this.then(void 0,t)}finally(t){return uo(super.finally(t),this)}then(t,n){return uo(super.then(t,n),this)}};function po(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Ju(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Yu(e){return Object.entries(e).reduce((t,[n,o])=>(t[Ju(n)]=o,t),{})}function Kt(e){const t=Yu(e);for(const n in t){const o=t[n];o&&typeof o=="object"&&!(o instanceof Date)&&(t[n]=Array.isArray(o)?o.map(Kt):Kt(o))}return t}function Zu(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function fo(e){return`tapps/${e}`}function N(e,t){sessionStorage.setItem(fo(e),JSON.stringify(t))}function I(e){const t=sessionStorage.getItem(fo(e));try{return t?JSON.parse(t):void 0}catch{}}function We(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function mo(e,t){t||(t={});const{textColor:n,bgColor:o,shouldLog:s}=t,i=s===void 0?!0:s,a=typeof i=="boolean"?()=>i:i;function c(u,l,...p){if(l||a()){const d="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${d};background-color: lightblue;color:black`,"",`${d};${n?`color:${n};`:""}${o?`background-color:${o}`:""}`,...p)}}return[c.bind(void 0,"log"),c.bind(void 0,"error")]}function _o(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function gf(e){}function yf(e){}function Xu(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function xu(e){var t,n;const o=typeof e;return o==="string"?`"${e}"`:o==="number"||o==="bigint"||o==="boolean"?`${e}`:o==="object"||o==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":o}function V(e,t,n,o,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,c=(s==null?void 0:s.received)??xu(i),u={kind:e.kind,type:e.type,input:i,expected:a,received:c,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??Xu(e.reference,u.lang)??(l?(u.lang,void 0):null)??o.message??(u.lang,void 0);p&&(u.message=typeof p=="function"?p(u):p),l&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function R(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},_o())}}}function ho(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function el(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var tl=class extends Error{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function bo(e,t){return{kind:"validation",type:"check",reference:bo,async:!1,expects:null,requirement:e,message:t,"~run"(n,o){return n.typed&&!this.requirement(n.value)&&V(this,"input",n,o),n}}}function go(e){return{kind:"validation",type:"integer",reference:go,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&V(this,"integer",t,n),t}}}function Z(e){return{kind:"transformation",type:"transform",reference:Z,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function yo(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function nl(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Ce(e){return{kind:"schema",type:"boolean",reference:Ce,expects:"boolean",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:V(this,"type",t,n),t}}}function vo(e){return{kind:"schema",type:"date",reference:vo,expects:"Date",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?V(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:V(this,"type",t,n),t}}}function wo(e,t){return{kind:"schema",type:"instance",reference:wo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return R(this)},"~run"(n,o){return n.value instanceof this.class?n.typed=!0:V(this,"type",n,o),n}}}function Jt(e){return{kind:"schema",type:"lazy",reference:Jt,expects:"unknown",async:!1,getter:e,get"~standard"(){return R(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function _e(e,t){return{kind:"schema",type:"loose_object",reference:_e,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return R(this)},"~run"(n,o){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const c=this.entries[a];if(a in i||(c.type==="exact_optional"||c.type==="optional"||c.type==="nullish")&&c.default!==void 0){const u=a in i?i[a]:yo(c),l=c["~run"]({value:u},o);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:u};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),o.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(c.type!=="exact_optional"&&c.type!=="optional"&&c.type!=="nullish"&&(V(this,"key",n,o,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),o.abortEarly))break}if(!n.issues||!o.abortEarly)for(const a in i)ho(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else V(this,"type",n,o);return n}}}function ze(e){return{kind:"schema",type:"number",reference:ze,expects:"number",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:V(this,"type",t,n),t}}}function v(e,t){return{kind:"schema",type:"optional",reference:v,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return R(this)},"~run"(n,o){return n.value===void 0&&(this.default!==void 0&&(n.value=yo(this,n,o)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,o)}}}function Eo(e,t,n){return{kind:"schema",type:"record",reference:Eo,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return R(this)},"~run"(o,s){var i,a;const c=o.value;if(c&&typeof c=="object"){o.typed=!0,o.value={};for(const u in c)if(ho(c,u)){const l=c[u],p=this.key["~run"]({value:u},s);if(p.issues){const y={type:"object",origin:"key",input:c,key:u,value:l};for(const b of p.issues)b.path=[y],(i=o.issues)==null||i.push(b);if(o.issues||(o.issues=p.issues),s.abortEarly){o.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const y={type:"object",origin:"value",input:c,key:u,value:l};for(const b of d.issues)b.path?b.path.unshift(y):b.path=[y],(a=o.issues)==null||a.push(b);if(o.issues||(o.issues=d.issues),s.abortEarly){o.typed=!1;break}}(!p.typed||!d.typed)&&(o.typed=!1),p.typed&&(o.value[p.value]=d.value)}}else V(this,"type",o,s);return o}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:V(this,"type",t,n),t}}}function So(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Yt(e,t){return{kind:"schema",type:"union",reference:Yt,expects:el(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return R(this)},"~run"(n,o){let s,i,a;for(const c of this.options){const u=c["~run"]({value:n.value},o);if(u.typed)if(u.issues)i?i.push(u):i=[u];else{s=u;break}else a?a.push(u):a=[u]}if(s)return s;if(i){if(i.length===1)return i[0];V(this,"type",n,o,{issues:So(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];V(this,"type",n,o,{issues:So(a)})}return n}}}function $o(){return{kind:"schema",type:"unknown",reference:$o,expects:"unknown",async:!1,get"~standard"(){return R(this)},"~run"(e){return e.typed=!0,e}}}function Co(e,t,n){const o=e["~run"]({value:t},_o(n));if(o.issues)throw new tl(o.issues);return o.value}function X(...e){return{...e[0],pipe:e,get"~standard"(){return R(this)},"~run"(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o["~run"](t,n))}return t}}}function rl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function ol(e){return Object.entries(e).reduce((t,[n,o])=>(t[rl(n)]=o,t),{})}function Zt(e){const t=ol(e);for(const n in t){const o=t[n];o&&typeof o=="object"&&!(o instanceof Date)&&(t[n]=Array.isArray(o)?o.map(Zt):Zt(o))}return t}function Xt(e){return Z(t=>e?Zt(t):t)}function Ao(e){return t=>X(e,Xt(t))}function Mo(e){return(t,n)=>Co(X(e,Xt(n)),t)}function Ge(){return Z(JSON.parse)}function xt(e){const t=Ao(e);return n=>X(g(),Ge(),t(n))}function en(e){return Z(t=>{const n={};return new URLSearchParams(t).forEach((o,s)=>{const i=n[s];Array.isArray(i)?i.push(o):i===void 0?n[s]=o:n[s]=[i,o]}),Co(e,n)})}function ko(e){return t=>X(Yt([g(),wo(URLSearchParams)]),en(e),Xt(t))}const Po=v(Jt(()=>ul())),sl=_e({id:ze(),photo_url:v(g()),type:g(),title:g(),username:v(g())}),il=_e({added_to_attachment_menu:v(Ce()),allows_write_to_pm:v(Ce()),first_name:g(),id:ze(),is_bot:v(Ce()),is_premium:v(Ce()),last_name:v(g()),language_code:v(g()),photo_url:v(g()),username:v(g())}),al=_e({auth_date:X(g(),Z(e=>new Date(Number(e)*1e3)),vo()),can_send_after:v(X(g(),Z(Number),go())),chat:v(Jt(()=>cl())),chat_type:v(g()),chat_instance:v(g()),hash:g(),query_id:v(g()),receiver:Po,start_param:v(g()),signature:g(),user:Po}),cl=xt(sl),ul=xt(il),To=ko(al);function oe(e){return/^#[\da-f]{6}$/i.test(e)}function Bo(e){return/^#[\da-f]{3}$/i.test(e)}function qo(e){const t=e.replace(/\s/g,"").toLowerCase();if(oe(t))return t;if(Bo(t)){let o="#";for(let s=0;s<3;s+=1)o+=t[1+s].repeat(2);return o}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((o,s)=>o+parseInt(s,10).toString(16).padStart(2,"0"),"#")}const Oo=Ao(Eo(g(),X(Yt([g(),ze()]),Z(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),bo(oe)))),tn=v(X(g(),Z(e=>e==="1"))),Io=xt(Oo()),ll=_e({tgWebAppBotInline:tn,tgWebAppData:v(To()),tgWebAppDefaultColors:v(Io()),tgWebAppFullscreen:tn,tgWebAppPlatform:g(),tgWebAppShowSettings:tn,tgWebAppStartParam:v(g()),tgWebAppThemeParams:Io(),tgWebAppVersion:g()}),jo=ko(ll),pl=Mo(To()),Qe=Mo(jo()),Do=_e({eventType:g(),eventData:v($o())});function nn(e,t){return t||(t=(n,o)=>JSON.stringify(o)),new URLSearchParams(Object.entries(e).reduce((n,[o,s])=>(Array.isArray(s)?n.push(...s.map(i=>[o,String(i)])):s!=null&&n.push([o,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":t(o,s)]),n),[])).toString()}function No(e){return nn(e)}function Vo(e){return nn(e,(t,n)=>t==="tgWebAppData"?No(n):JSON.stringify(n))}function Lo(e){try{return nl(jo(),e)}catch{return!1}}function dl(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(s){s(n)}),(o=e.get("*"))&&o.slice().map(function(s){s(t,n)})}}}var fl=Object.defineProperty,ml=(e,t,n)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rn=(e,t,n)=>ml(e,typeof t!="symbol"?t+"":t,n);function Ho(e,t){return n=>n instanceof e&&n.type===t}function M(e,t){t||(t=[]);const n=Symbol(e);class o extends Error{constructor(...i){const a=typeof t=="function"?t(...i):typeof t=="string"?[t]:t||[];super(...a),rn(this,"type",n),this.name=e}}return Object.defineProperty(o,"name",{value:e}),[o,Ho(o,n)]}function _l(e,t,n){const o=Symbol(e);class s extends M(e,n)[0]{constructor(...a){super(...a),rn(this,"data"),rn(this,"type",o),this.data=t(...a)}}return Object.defineProperty(s,"name",{value:e}),[s,Ho(s,o)]}let he;function hl(e,t){he&&he.set(e,t)||t()}function Ae(e){if(he)return e();he=new Map;try{e()}finally{he.forEach(t=>t()),he=void 0}}function Ke(e,t){t||(t={});const n=t.equals||Object.is;let o=[],s=e;const i=l=>{if(!n(s,l)){const p=s;s=l,hl(u,()=>{[...o].forEach(([d,y])=>{d(l,p),y&&c(d,!0)})})}};function a(l){const p=typeof l!="object"?{once:l}:l;return{once:p.once||!1,signal:p.signal||!1}}const c=(l,p)=>{const d=a(p),y=o.findIndex(([b,Q])=>b===l&&Q.once===d.once&&Q.signal===d.signal);y>=0&&o.splice(y,1)},u=Object.assign(function(){return bl(u),s},{destroy(){o=[]},set:i,reset(){i(e)},sub(l,p){return o.push([l,a(p)]),()=>c(l,p)},unsub:c,unsubAll(){o=o.filter(l=>l[1].signal)}});return u}const Me=[];function bl(e){Me.length&&Me[Me.length-1].add(e)}function gl(e,t){let n=new Set,o;function s(){return o||(o=Ke(a(),t))}function i(){s().set(a())}function a(){n.forEach(l=>{l.unsub(i,{signal:!0})});const c=new Set;let u;Me.push(c);try{u=e()}finally{Me.pop()}return c.forEach(l=>{l.sub(i,{signal:!0})}),n=c,u}return Object.assign(function(){return s()()},{destroy(){s().destroy()},sub(...c){return s().sub(...c)},unsub(...c){s().unsub(...c)},unsubAll(...c){s().unsubAll(...c)}})}function Ro(e){return Fe(D({TelegramWebviewProxy:D({postEvent:Gt()})}),e)}function Fo(){try{return window.self!==window.top}catch{return!0}}function yl(e,t){const n=dl(),o=new Map,s=(i,a,c)=>{c||(c=!1);const u=o.get(i)||new Map;o.set(i,u);const l=u.get(a)||[];u.set(a,l);const p=l.findIndex(d=>d[1]===c);p>=0&&(n.off(i,l[p][0]),l.splice(p,1),!l.length&&u.delete(a),u.size||(o.delete(i),!o.size&&t()))};return[function(i,a,c){!o.size&&e();function u(){s(i,a,c)}function l(...y){c&&u(),i==="*"?a(y):a(...y)}n.on(i,l);const p=o.get(i)||new Map;o.set(i,p);const d=p.get(a)||[];return p.set(a,d),d.push([l,c||!1]),u},s,n.emit,function(){const i=n.all.size;n.all.clear(),o.clear(),i&&t()}]}function on(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let Je=!1;const[sn,vl]=mo("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return Je}}),Uo=e=>{sn(!1,"Event received:",e)};function wl(e){e!==Je&&(Je=e,Je?w("*",Uo):B("*",Uo))}const El={clipboard_text_received:D({req_id:$(),data:Se($())}),custom_method_invoked:D({req_id:$(),result:Ue(to()),error:Ue($())}),popup_closed:Se(D({button_id:Se($(),()=>{})}),{}),viewport_changed:D({height:$e(),width:Se($e(),()=>window.innerWidth),is_state_stable:Wt(),is_expanded:Wt()}),theme_changed:D({theme_params:Oo()})};function Wo(e){if(e.source!==window.parent)return;let t;try{t=Y(me($(),Ge(),Do),e.data)}catch{return}const{eventType:n,eventData:o}=t,s=El[n];try{const i=s?Y(s,o):o;Sl(n,i)}catch(i){vl(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,i)}}const[w,B,Sl,vf]=yl(()=>{const e=window,t={receiveEvent:on};e.TelegramGameProxy_receiveEvent=on,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",Wo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",Wo)}),[zo,$l]=M("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[Go,Cl]=M("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),[Qo,Al]=_l("LaunchParamsRetrieveError",e=>({errors:e}),e=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment","","Collected errors:",...e.map(([t,n])=>`Source: ${t} / ${n instanceof Error?n.message:String(n)}`)].join(`
`)]),[Ko,Ml]=M("InvalidLaunchParamsError",(e,t)=>[`Invalid value for launch params: ${e}`,{cause:t}]),[Jo,kl]=M("UnknownEnvError"),[Yo,Pl]=M("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]),ke=Ke((...e)=>window.parent.postMessage(...e)),Zo=(...e)=>ke()(...e),Xo=Ke("https://web.telegram.org");function an(e,t){sn(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,o=JSON.stringify({eventType:e,eventData:t});if(Fo())return Zo(o,Xo());if(Ro(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(Fe(D({external:D({notify:Gt()})}),n)){n.external.notify(o);return}throw new Jo}function cn(e,t,n){n||(n={});const{capture:o}=n,[s,i]=We();return new C(a=>{(Array.isArray(t)?t:[t]).forEach(c=>{s(w(c,u=>{(!o||(Array.isArray(t)?o({event:c,payload:u}):o(u)))&&a(u)}))}),(n.postEvent||an)(e,n.params)},n).finally(i)}const xo="launchParams";function es(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function un(){const e=[];for(const[t,n]of[[()=>es(window.location.href),"window.location.href"],[()=>{const o=performance.getEntriesByType("navigation")[0];return o&&es(o.name)},"performance navigation entries"],[()=>I(xo),"local storage"]]){const o=t();if(!o){e.push([n,new Error("Source is empty")]);continue}if(Lo(o))return N(xo,o),o;try{Qe(o)}catch(s){e.push([n,s])}}throw new Qo(e)}function Ye(e){const t=Qe(un());return e?Kt(t):t}function ln(e,t){if(!e)try{return Ye(),!0}catch{return!1}return C.fn(async n=>{if(Ro(window))return!0;try{return await cn("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function Tl({launchParams:e,onEvent:t,resetPostMessage:n}={}){if(e){const i=typeof e=="string"||e instanceof URLSearchParams?e.toString():Vo({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!Lo(i))try{Qe(i)}catch(a){throw new Ko(i,a)}N("launchParams",i)}if(Fo()){if(!t)return;const i=me($(),Ge(),Do);n&&ke.reset();const a=ke();ke.set((...c)=>{const[u]=c,l=()=>{a(...c)};if(Fe(i,u)){const p=Y(i,u);t([p.eventType,p.eventData],l)}else l()});return}const o=window.TelegramWebviewProxy||{},s=o.postEvent||(()=>{});window.TelegramWebviewProxy={...o,postEvent(i,a){const c=()=>{s(i,a)};t?t([i,a?JSON.parse(a):void 0],c):c()}},sn(!1,"Environment was mocked by the mockTelegramEnv function")}function ts(){return new URLSearchParams(un()).get("tgWebAppData")||void 0}function ns(e){return({req_id:t})=>t===e}function rs(e){return e.split(".").map(Number)}function Bl(e,t){const n=rs(e),o=rs(t),s=Math.max(n.length,o.length);for(let i=0;i<s;i+=1){const a=n[i]||0,c=o[i]||0;if(a!==c)return a>c?1:-1}return 0}function P(e,t){return Bl(e,t)<=0}function x(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return P("6.4",n);if(t==="try_browser")return P("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return P("6.9",n);if(e==="web_app_close"&&t==="return_back")return P("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return P("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return P("6.1",t);case"web_app_open_popup":return P("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return P("6.4",t);case"web_app_switch_inline_query":return P("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return P("6.9",t);case"web_app_setup_settings_button":return P("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return P("7.2",t);case"web_app_setup_swipe_behavior":return P("7.7",t);case"web_app_share_to_story":return P("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return P("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return P("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function os(e,t){t||(t="strict");const n=typeof t=="function"?t:o=>{const{method:s,version:i}=o,a="param"in o?new Go(s,o.param,i):new zo(s,i);if(t==="strict")throw a;return console.warn(a.message)};return(o,s)=>x(o,e)?o==="web_app_set_header_color"&&Fe(D({color:Jr()}),s)&&!x(o,"color",e)?n({version:e,method:o,param:"color"}):an(o,s):n({version:e,method:o})}function ql(e,t,n,o){return cn("web_app_invoke_custom_method","custom_method_invoked",{...o||{},params:{method:e,params:t,req_id:n},capture:ns(n)}).then(({result:s,error:i})=>{if(i)throw new Yo(i);return s})}function Ol(){return performance.getEntriesByType("navigation")[0]}function L(){const e=Ol();return!!e&&e.type==="reload"}function be(e,t){return Ke(e,t)}function m(e,t){return gl(e,t)}function h(e,t){const n=be(e,t);return[n,m(n)]}let ss=!1;const[pn,wf]=mo("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return ss}});function Il(e){ss=e,wl(e)}const dn=be(0),is=be(an),[as,Pe]=h({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),ee=m(()=>Pe().tgWebAppVersion);function cs(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||Ye();as.set(n),is.set(typeof t=="function"?t:os(n.tgWebAppVersion)),pn(!1,"The package was configured. Launch params:",as())}function fn(){return dn.set(dn()+1),dn().toString()}function se(e,t,n){return ql(e,t,fn(),{...n||{},postEvent:f})}const S=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=f),cn(e,t,n)),f=(e,t)=>is()(e,t);function F(e){return m(()=>x(e,ee()))}function ie(e){return[e]}const[Ze,jl]=M("CSSVarsBoundError","CSS variables are already bound"),[mn,Dl]=M("NotAvailableError",ie),[Nl,Vl]=M("InvalidEnvError",ie),[ge,Ll]=M("FunctionNotAvailableError",ie),[U,Hl]=M("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[us,Rl]=M("ConcurrentCallError",ie),[ls,Fl]=M("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[_n,Ul]=M("AccessDeniedError",ie),[ps,Wl]=M("FullscreenFailedError",ie),[ds,zl]=M("ShareMessageError",ie),[Xe,Gl]=M("UnknownThemeParamsKeyError",e=>[`Unknown theme params key passed: ${e}`]);function hn(){return typeof window>"u"}function E(e,t,n){n||(n={});const{isSupported:o,isMounted:s,isMounting:i,component:a,supports:c}=n||{},u=`${a?`${a}.`:""}${e}()`,l=o?Array.isArray(o)||typeof o=="object"&&"any"in o?o:[o]:void 0;function p(k){if(c){const A=c[k];return x(A[0],A[1],ee())}return!0}function d(){if(!l)return;function k(J){return typeof J=="function"?J():x(J,ee())?void 0:`it is unsupported in Mini Apps version ${ee()}`}const A=Array.isArray(l)?l:l.any,z=A.map(k).filter(Boolean);return Array.isArray(l)?z[0]:z.length===A.length?z[z.length-1]:void 0}function y(...k){for(const A in c)if(c[A][2](...k)&&!p(A))return`option ${A} is not supported in Mini Apps version ${ee()}`}let b;if(c){b={};for(const k in c)b[k]=m(()=>p(k))}const Q=m(()=>!d()),Dt=m(()=>ee()!=="0.0"),K=m(()=>!s||s()),Re=m(()=>ln()&&!hn()&&Dt()&&Q()&&K());return Object.assign((...k)=>{const A=`Unable to call the ${u} ${a?"method":"function"}:`;if(hn()||!ln())throw new ge(`${A} it can't be called outside Mini Apps`);if(!Dt())throw new ge(`${A} the SDK was not initialized. Use the SDK init() function`);const z=d();if(z)throw new ge(`${A} ${z}`);const J=y(...k);if(J)throw new ge(`${A} ${J}`);if(!K()){const _=i&&i()?"mounting. Wait for the mount completion":`unmounted. Use the ${a}.mount() method`;throw new ge(`${A} the component is ${_}`)}return t(...k)},t,{isAvailable:Re,ifAvailable(...k){return Re()?[!0,t(...k)]:[!1]}},l?{isSupported:Q}:{},b?{supports:b}:{})}function xe(e,t){return t||(t={}),(n,o,s,i)=>E(n,o,{...t,isSupported:s||t.isSupported,supports:i,component:e})}function te(e,t,n){return xe(e,{isSupported:n,isMounted:t})}function H(e,t){return xe(e,{isSupported:t})}const et="web_app_setup_back_button",fs="back_button_pressed",tt="backButton",[ms,_s]=h(!1),[nt,hs]=h(!1),bs=F(et),gs=te(tt,nt,et),bn=H(tt,et),ys=gs("hide",()=>{gn(!1)}),vs=bn("mount",()=>{nt()||(gn(L()&&I(tt)||!1),nt.set(!0))});function gn(e){e!==ms()&&(f(et,{is_visible:e}),N(tt,e),ms.set(e))}const ws=bn("onClick",e=>w(fs,e)),Es=bn("offClick",e=>{B(fs,e)}),Ss=gs("show",()=>{gn(!0)});function $s(){nt.set(!1)}const Ql=Object.freeze(Object.defineProperty({__proto__:null,hide:ys,isMounted:hs,isSupported:bs,isVisible:_s,mount:vs,offClick:Es,onClick:ws,show:Ss,unmount:$s},Symbol.toStringTag,{value:"Module"}));function j(e,t,n){n||(n={});const{promise:o,error:s}=n,[i,a]=o?[o,m(o)]:h(),[c,u]=s?[s,m(s)]:h();return[Object.assign((...l)=>{if(i()){const d=new us(t);return c.set(d),C.reject(d)}Ae(()=>{i.set(e(...l)),c.set(void 0)});let p;return i().catch(d=>{throw p=d,d}).finally(()=>{Ae(()=>{i.set(void 0),c.set(p)})})},e),[i,a,m(()=>!!i())],[c,u]]}function Te(e,t,n){const[o,...s]=j(t,`The ${e} component is already mounting`),[i,a]=h(!1);return[(...c)=>i()?C.resolve():o(...c).then(u=>{Ae(()=>{i.set(!0),n(u)})}),...s,[i,a]]}const[yn,Cs]=h({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),As=m(()=>yn().available),Ms="web_app_biometry_get_info",ks=E("requestBiometry",e=>S(Ms,"biometry_info_received",e),{isSupported:Ms});function vn(e){if(!oo(e))throw e}function ye(e){const t=e();t&&t.catch(vn).cancel()}const Be="biometry",rt="web_app_biometry_request_auth",wn="biometry_info_received",Ps=e=>{ot(En(e))};function Ts(){throw new mn("Biometry is not available")}function En(e){let t=!1,n=!1,o="",s=!1,i="",a=!1;return e.available&&(t=!0,n=e.token_saved,o=e.device_id,s=e.access_requested,i=e.type,a=e.access_granted),{available:t,tokenSaved:n,deviceId:o,type:i,accessGranted:a,accessRequested:s}}const Bs=F(rt),[Kl,Jl,Yl,qs]=Te(Be,e=>{const t=L()&&I(Be);return t?C.resolve(t):ks({abortSignal:e}).then(En)},e=>{w(wn,Ps),ot(e)}),Os=H(Be,rt),Sn=te(Be,qs[0],rt),Is=Os("mount",Kl),[,$n,js]=Jl,[,Ds]=Yl,[Zl,Ns]=qs,[Xl,xl,ep]=j(e=>C.fn(async t=>{const n=yn();n.available||Ts();const o=await S(rt,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:s}=o;return typeof s=="string"&&ot({...n,token:s}),o},e),"Biometry authentication is already in progress"),Vs=Sn("authenticate",Xl),[,Cn,Ls]=xl,[,Hs]=ep,Rs=Os("openSettings",()=>{f("web_app_biometry_open_settings")}),[tp,np,rp]=j(e=>C.fn(async t=>{const n=await S("web_app_biometry_request_access",wn,{...e,...t,params:{reason:(e||{}).reason||""}}).then(En);return n.available||Ts(),ot(n),n.accessGranted},e),"Biometry access request is already in progress"),Fs=Sn("requestAccess",tp),[,An,Us]=np,[,Ws]=rp;function ot(e){yn.set(e),N(Be,e)}function zs(){[Cn,An,$n].forEach(ye),B(wn,Ps),Zl.set(!1)}const Gs=Sn("updateToken",e=>(e||(e={}),S("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),op=Object.freeze(Object.defineProperty({__proto__:null,authError:Hs,authPromise:Cn,authenticate:Vs,isAuthenticating:Ls,isAvailable:As,isMounted:Ns,isMounting:js,isRequestingAccess:Us,isSupported:Bs,mount:Is,mountError:Ds,mountPromise:$n,openSettings:Rs,requestAccess:Fs,requestAccessError:Ws,requestAccessPromise:An,state:Cs,unmount:zs,updateToken:Gs},Symbol.toStringTag,{value:"Module"}));function st(e,t){return xe(e,{isMounted:t})}const ne=xe,it="closingBehavior",[Qs,Ks]=h(!1),[Mn,kn]=h(!1),Js=st(it,kn),sp=ne(it),Ys=Js("disableConfirmation",()=>{Pn(!1)}),Zs=Js("enableConfirmation",()=>{Pn(!0)}),Xs=sp("mount",()=>{Mn()||(Pn(L()&&I(it)||!1),Mn.set(!0))});function Pn(e){e!==Qs()&&(f("web_app_setup_closing_behavior",{need_confirmation:e}),N(it,e),Qs.set(e))}function xs(){Mn.set(!1)}const ip=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:Ys,enableConfirmation:Zs,isConfirmationEnabled:Ks,isMounted:kn,mount:Xs,unmount:xs},Symbol.toStringTag,{value:"Module"})),ei="web_app_invoke_custom_method",qe=H("cloudStorage",ei),ti=F(ei),Tn=qe("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?se("deleteStorageValues",{keys:n},t).then():C.resolve()});function ap(e,t){const n=Array.isArray(e)?e:[e];return n.length?se("getStorageValues",{keys:n},t).then(o=>{const s={...n.reduce((i,a)=>(i[a]="",i),{}),...Y(Xr($(),$()),o)};return typeof e=="string"?s[e]:s}):C.resolve(Array.isArray(e)?{}:"")}const ni=qe("getItem",ap),Bn=qe("getKeys",e=>se("getStorageKeys",{},e).then(t=>Y(Yr($()),t))),ri=qe("setItem",(e,t,n)=>se("saveStorageValue",{key:e,value:t},n).then()),cp=qe("clear",e=>Bn(e).then(Tn)),up=Object.freeze(Object.defineProperty({__proto__:null,clear:cp,deleteItem:Tn,getItem:ni,getKeys:Bn,isSupported:ti,setItem:ri},Symbol.toStringTag,{value:"Module"})),Oe="web_app_trigger_haptic_feedback",qn=H("hapticFeedback",Oe),oi=F(Oe),si=qn("impactOccurred",e=>{f(Oe,{type:"impact",impact_style:e})}),ii=qn("notificationOccurred",e=>{f(Oe,{type:"notification",notification_type:e})}),ai=qn("selectionChanged",()=>{f(Oe,{type:"selection_change"})}),lp=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:si,isSupported:oi,notificationOccurred:ii,selectionChanged:ai},Symbol.toStringTag,{value:"Module"})),[ci,ui]=h(void 0);function W(e){return m(()=>{const t=ci();return t?t[e]:void 0})}const On=W("auth_date"),In=W("can_send_after"),li=m(()=>{const e=On(),t=In();return t&&e?new Date(e.getTime()+t*1e3):void 0}),pi=W("chat"),di=W("chat_type"),fi=W("chat_instance"),mi=W("hash"),_i=W("query_id"),[pp,hi]=h(),bi=W("receiver");function gi(){const e=Ye();ci.set(e.tgWebAppData),pp.set(ts())}const yi=W("start_param"),vi=W("user"),dp=Object.freeze(Object.defineProperty({__proto__:null,authDate:On,canSendAfter:In,canSendAfterDate:li,chat:pi,chatInstance:fi,chatType:di,hash:mi,queryId:_i,raw:hi,receiver:bi,restore:gi,startParam:yi,state:ui,user:vi},Symbol.toStringTag,{value:"Module"})),jn="web_app_open_invoice",fp=H("invoice",jn),wi=F(jn);function mp(e,t,n){let o;if(t==="url"){const{hostname:s,pathname:i}=new URL(e,window.location.href);if(s!=="t.me")throw new U(`Link has unexpected hostname: ${s}`);const a=i.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!a)throw new U('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,o]=a}else o=e,n=t;return S(jn,"invoice_closed",{...n,params:{slug:o},capture:s=>o===s.slug}).then(s=>s.status)}const[_p,hp,bp]=j(mp,"Invoice is already opened"),Ei=fp("open",_p),[,Si,$i]=hp,[,Ci]=bp,gp=Object.freeze(Object.defineProperty({__proto__:null,isOpened:$i,isSupported:wi,open:Ei,openError:Ci,openPromise:Si},Symbol.toStringTag,{value:"Module"})),Ie="locationManager",Dn="web_app_check_location",Ai="web_app_open_location_settings",at=be({available:!1,accessGranted:!1,accessRequested:!1});function Nn(e){return m(()=>at()[e])}const Mi=F(Dn),ki=Nn("available"),Pi=Nn("accessGranted"),Ti=Nn("accessRequested");function yp(e){let t=!1,n,o;return e.available&&(t=!0,n=e.access_requested,o=e.access_granted),{available:t,accessGranted:o||!1,accessRequested:n||!1}}const[vp,wp,Ep,Bi]=Te(Ie,e=>{const t=L()&&I(Ie);return t?C.resolve(t):S("web_app_check_location","location_checked",e).then(yp)},e=>{at.set(e),N(Ie,e)}),qi=H(Ie,Dn),Sp=te(Ie,Bi[0],Dn),Oi=qi("mount",vp),[,Ii,ji]=wp,[,Di]=Ep,[$p,Ni]=Bi,[Cp,Ap,Mp]=j(e=>S("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw at.set({...at(),available:!1}),new mn("Location data tracking is not available");const{available:n,...o}=t;return o}),"Location request is currently in progress"),Vi=Sp("requestLocation",Cp),[,Vn,Li]=Ap,[,Hi]=Mp,Ri=qi("openSettings",()=>{f(Ai)},Ai);function Fi(){ye(Vn),$p.set(!1)}const kp=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:Pi,isAccessRequested:Ti,isAvailable:ki,isMounted:Ni,isMounting:ji,isRequestingLocation:Li,isSupported:Mi,mount:Oi,mountError:Di,mountPromise:Ii,openSettings:Ri,requestLocation:Vi,requestLocationError:Hi,requestLocationPromise:Vn,unmount:Fi},Symbol.toStringTag,{value:"Module"}));function Ln(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=o)}return t}function Hn(e){const t=qo(e);return Math.sqrt([.299,.587,.114].reduce((n,o,s)=>{const i=parseInt(t.slice(1+s*2,1+(s+1)*2),16);return n+i*i*o},0))<120}const[Rn,Ui]=h(!1),[ae,ce]=h({});function q(e){return m(()=>ae()[e])}const Wi=q("accent_text_color"),Fn=q("bg_color"),ct=q("button_color"),Un=q("button_text_color"),zi=q("bottom_bar_bg_color"),Gi=q("destructive_text_color"),Qi=q("header_bg_color"),Ki=q("hint_color"),Ji=m(()=>{const e=Fn();return!e||Hn(e)}),Yi=q("link_color"),Wn=q("secondary_bg_color"),Zi=q("section_bg_color"),Xi=q("section_header_text_color"),xi=q("section_separator_color"),ea=q("subtitle_text_color"),ta=q("text_color");function ue(e){return m(()=>ut()[e])}const je=be({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),ut=m(()=>{const e=je();return{...e,backgroundColor:e.backgroundColor||ct()||"#2481cc",textColor:e.textColor||Un()||"#ffffff"}}),[zn,Gn]=h(!1),na=ue("backgroundColor"),ra=ue("hasShineEffect"),oa=ue("isEnabled"),sa=ue("isLoaderVisible"),ia=ue("isVisible"),aa=ue("text"),ca=ue("textColor"),Pp="web_app_setup_main_button",ua="main_button_pressed",lt="mainButton",Qn=ne(lt),Tp=st(lt,Gn),la=Qn("mount",()=>{if(!zn()){const e=L()&&I(lt);e&&je.set(e),zn.set(!0)}}),pa=Qn("onClick",e=>w(ua,e)),da=Qn("offClick",e=>{B(ua,e)}),fa=Tp("setParams",e=>{je.set({...je(),...Ln(e)}),N(lt,je());const t=ut();t.text&&f(Pp,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function ma(){zn.set(!1)}const Bp=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:na,hasShineEffect:ra,isEnabled:oa,isLoaderVisible:sa,isMounted:Gn,isVisible:ia,mount:la,offClick:da,onClick:pa,setParams:fa,state:ut,text:aa,textColor:ca,unmount:ma},Symbol.toStringTag,{value:"Module"}));function Kn(e,t){document.documentElement.style.setProperty(e,t)}function Jn(e){document.documentElement.style.removeProperty(e)}const ve="themeParams",Yn="theme_changed",_a=ne(ve),Zn=({theme_params:e})=>{ae.set(e),N(ve,e)},[qp,ha,Op,ba]=Te(ve,e=>C.resolve(L()&&I(ve)||Pe().tgWebAppThemeParams||{}),e=>{w(Yn,Zn),ae.set(e)}),ga=st(ve,ba[0])("bindCssVars",e=>{if(Rn())throw new Ze;e||(e=o=>`--tg-theme-${Zu(o)}`);function t(o){Object.entries(ae()).forEach(([s,i])=>{i&&o(s,i)})}function n(){t((o,s)=>{Kn(e(o),s)})}return n(),ae.sub(n),Rn.set(!0),()=>{t(Jn),ae.unsub(n),Rn.set(!1)}}),Xn=_a("mount",qp),ya=ha[2],xn=ha[1],va=Op[1],[er,wa]=ba,tr=_a("mountSync",()=>{if(!er()){const e=L()&&I(ve)||Pe().tgWebAppThemeParams||{};w(Yn,Zn),Ae(()=>{ae.set(e),er.set(!0)})}});function Ea(){ye(xn),B(Yn,Zn),er.set(!1)}function Sa(e){return m(()=>pt(e()))}function pt(e){return oe(e)?e:ce()[e]}const[De,$a]=h("bg_color"),dt=Sa(De),[Ne,Ca]=h("bottom_bar_bg_color"),ft=m(()=>{const e=Ne();return oe(e)?e:ce()[e]||Wn()}),[Ve,Aa]=h("bg_color"),nr=Sa(Ve),[rr,Ma]=h(!1),ka=m(()=>{const e=dt();return e?Hn(e):!1}),[mt,Pa]=h(!0),or=m(()=>({backgroundColor:De(),bottomBarColor:Ne(),headerColor:Ve(),isActive:mt()})),Ip=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:Wi,backgroundColor:Fn,bindCssVars:ga,bottomBarBgColor:zi,buttonColor:ct,buttonTextColor:Un,destructiveTextColor:Gi,headerBackgroundColor:Qi,hintColor:Ki,isCssVarsBound:Ui,isDark:Ji,isMounted:wa,isMounting:ya,linkColor:Yi,mount:Xn,mountError:va,mountPromise:xn,mountSync:tr,secondaryBackgroundColor:Wn,sectionBackgroundColor:Zi,sectionHeaderTextColor:Xi,sectionSeparatorColor:xi,state:ce,subtitleTextColor:ea,textColor:ta,unmount:Ea},Symbol.toStringTag,{value:"Module"})),_t="web_app_set_background_color",ht="web_app_set_bottom_bar_color",le="web_app_set_header_color",sr="visibility_changed",pe="miniApp",ir={any:[_t,ht,le]},Ta=m(()=>ir.any.some(e=>x(e,ee()))),ar=e=>{mt.set(e.is_visible),gt()},cr=e=>{[[Ve,le],[De,_t],[Ne,ht]].forEach(([t,n])=>{const o=t();if(!oe(o)&&(n!==le||o!=="bg_color"&&o!=="secondary_bg_color")){const s=e[o];s&&f(n,{color:s})}})},[jp,Ba,Dp,qa]=Te(pe,e=>Xn(e).then(()=>L()&&I(pe)||void 0),e=>{yt.ifAvailable(e?e.backgroundColor:"bg_color"),vt.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),wt.ifAvailable(e?e.headerColor:"bg_color"),mt.set(e?e.isActive:!0),w(sr,ar),ce.sub(cr)}),Oa=ne(pe),Ia=H(pe,ir),bt=te(pe,qa[0],ir),ja=bt("bindCssVars",e=>{if(rr())throw new Ze;const[t,n]=We();function o(s,i){function a(){Kn(s,i()||null)}a(),t(i.sub(a),Jn.bind(null,s))}return e||(e=s=>`--tg-${po(s)}`),o(e("bgColor"),dt),o(e("bottomBarColor"),ft),o(e("headerColor"),nr),t(()=>{rr.set(!1)}),rr.set(!0),n}),Da=Oa("close",e=>{f("web_app_close",{return_back:e})}),Na=Ia("mount",jp),Va=Ba[2],ur=Ba[1],La=Dp[1],[lr,Ha]=qa,Ra=Ia("mountSync",()=>{if(!lr()){tr();const e=L()&&I(pe)||void 0;yt.ifAvailable(e?e.backgroundColor:"bg_color"),vt.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),wt.ifAvailable(e?e.headerColor:"bg_color"),w(sr,ar),ce.sub(cr),Ae(()=>{mt.set(e?e.isActive:!0),lr.set(!0)})}}),Fa=Oa("ready",()=>{f("web_app_ready")});function gt(){N(pe,or())}const yt=bt("setBackgroundColor",e=>{if(e===De())return;const t=pt(e);if(!t)throw new Xe(e);f(_t,{color:t}),De.set(e),gt()},_t),vt=bt("setBottomBarColor",e=>{if(e===Ne())return;const t=pt(e);if(!t)throw new Xe(e);f(ht,{color:t}),Ne.set(e),gt()},ht),wt=bt("setHeaderColor",e=>{if(e!==Ve()){if(e==="bg_color"||e==="secondary_bg_color")f(le,{color_key:e});else{const t=pt(e);if(!t)throw new Xe(e);f(le,{color:t})}Ve.set(e),gt()}},le,{rgb:[le,"color",oe]});function Ua(){ye(ur),B(sr,ar),ce.unsub(cr),lr.set(!1)}const Np=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:$a,backgroundColorRGB:dt,bindCssVars:ja,bottomBarColor:Ca,bottomBarColorRGB:ft,close:Da,headerColor:Aa,headerColorRGB:nr,isActive:Pa,isCssVarsBound:Ma,isDark:ka,isMounted:Ha,isMounting:Va,isSupported:Ta,mount:Na,mountError:La,mountPromise:ur,mountSync:Ra,ready:Fa,setBackgroundColor:yt,setBottomBarColor:vt,setHeaderColor:wt,state:or,unmount:Ua},Symbol.toStringTag,{value:"Module"}));function Vp(e){const t=e.message.trim(),n=(e.title||"").trim(),o=e.buttons||[];if(n.length>64)throw new U(`Invalid title: ${n}`);if(!t||t.length>256)throw new U(`Invalid message: ${t}`);if(o.length>3)throw new U(`Invalid buttons count: ${o.length}`);return{title:n,message:t,buttons:o.length?o.map((s,i)=>{const a=s.id||"";if(a.length>64)throw new U(`Button with index ${i} has invalid id: ${a}`);if(!s.type||s.type==="default"||s.type==="destructive"){const c=s.text.trim();if(!c||c.length>64)throw new U(`Button with index ${i} has invalid text: ${c}`);return{type:s.type,text:c,id:a}}return{type:s.type,id:a}}):[{type:"close",id:""}]}}const pr="web_app_open_popup",Wa=H("popup",pr),za=F(pr),[Ga,dr,Qa]=j(e=>S(pr,"popup_closed",{...e,params:Vp(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),Ka=Wa("open",Ga),Ja=dr[1],Ya=dr[2],Za=Qa[1],Xa=Wa("show",Ga),[,xa,ec]=dr,[,tc]=Qa,Lp=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Ya,isShown:ec,isSupported:za,open:Ka,openError:Za,openPromise:Ja,show:Xa,showError:tc,showPromise:xa},Symbol.toStringTag,{value:"Module"})),nc="web_app_close_scan_qr_popup",fr="web_app_open_scan_qr_popup",Hp="scan_qr_popup_closed",Rp="qr_text_received",rc=H("qrScanner",fr),oc=rc("close",()=>{f(nc),ye(mr)}),sc=F(fr);function Fp(e){e||(e={});const{onCaptured:t,text:n,capture:o}=e,[,s]=We(w(Hp,()=>{i.resolve()}),w(Rp,a=>{t?t(a.data):(!o||o(a.data))&&(i.resolve(a.data),f(nc))})),i=new lo(e);return(e.postEvent||f)(fr,{text:n}),C.resolve(i).catch(vn).finally(s)}const[Up,Wp,zp]=j(Fp,"The QR Scanner is already opened"),ic=rc("open",Up),[,mr,ac]=Wp,[,cc]=zp,Gp=Object.freeze(Object.defineProperty({__proto__:null,close:oc,isOpened:ac,isSupported:sc,open:ic,openError:cc,openPromise:mr},Symbol.toStringTag,{value:"Module"}));function re(e){return m(()=>Et()[e])}const Le=be({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),Et=m(()=>{const e=Le();return{...e,backgroundColor:e.backgroundColor||ft()||"#000000",textColor:e.textColor||ct()||"#2481cc"}}),[_r,hr]=h(!1),uc=re("backgroundColor"),lc=re("hasShineEffect"),pc=re("isEnabled"),dc=re("isLoaderVisible"),fc=re("isVisible"),mc=re("position"),_c=re("text"),hc=re("textColor"),St="web_app_setup_secondary_button",bc="secondary_button_pressed",$t="secondaryButton",br=H($t,St),Qp=te($t,hr,St),gc=F(St),yc=br("mount",()=>{if(!_r()){const e=L()&&I($t);e&&Le.set(e),_r.set(!0)}}),vc=br("onClick",e=>w(bc,e)),wc=br("offClick",e=>{B(bc,e)}),Ec=Qp("setParams",e=>{Le.set({...Le(),...Ln(e)}),N($t,Le());const t=Et();t.text&&f(St,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function Sc(){_r.set(!1)}const Kp=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:uc,hasShineEffect:lc,isEnabled:pc,isLoaderVisible:dc,isMounted:hr,isSupported:gc,isVisible:fc,mount:yc,offClick:wc,onClick:vc,position:mc,setParams:Ec,state:Et,text:_c,textColor:hc,unmount:Sc},Symbol.toStringTag,{value:"Module"})),Ct="web_app_setup_settings_button",$c="settings_button_pressed",At="settingsButton",[Cc,Ac]=h(!1),[Mt,Mc]=h(!1),kc=F(Ct),gr=H(At,Ct),Pc=te(At,Mt,Ct),Tc=Pc("hide",()=>{yr(!1)}),Bc=gr("mount",()=>{Mt()||(yr(L()&&I(At)||!1),Mt.set(!0))});function yr(e){e!==Cc()&&(f(Ct,{is_visible:e}),N(At,e),Cc.set(e))}const qc=gr("onClick",e=>w($c,e)),Oc=gr("offClick",e=>{B($c,e)}),Ic=Pc("show",()=>{yr(!0)});function jc(){Mt.set(!1)}const Jp=Object.freeze(Object.defineProperty({__proto__:null,hide:Tc,isMounted:Mc,isSupported:kc,isVisible:Ac,mount:Bc,offClick:Oc,onClick:qc,show:Ic,unmount:jc},Symbol.toStringTag,{value:"Module"})),kt="web_app_setup_swipe_behavior",Pt="swipeBehavior",[He,Dc]=h(!1),Nc=F(kt),[vr,Vc]=h(!0),Yp=H(Pt,kt),Lc=te(Pt,He,kt),Hc=Lc("disableVertical",()=>{wr(!1)}),Rc=Lc("enableVertical",()=>{wr(!0)}),Fc=Yp("mount",()=>{He()||(wr(L()&&I(Pt)||!1,!0),He.set(!0))});function wr(e,t){(e!==vr()||t)&&(f(kt,{allow_vertical_swipe:e}),N(Pt,e),vr.set(e))}function Uc(){He.set(!1)}const Zp=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:He,_isVerticalEnabled:vr,disableVertical:Hc,enableVertical:Rc,isMounted:Dc,isSupported:Nc,isVerticalEnabled:Vc,mount:Fc,unmount:Uc},Symbol.toStringTag,{value:"Module"})),de="viewport",Er="fullscreen_changed",Sr="safe_area_changed",$r="content_safe_area_changed",Cr="viewport_changed",Wc=ne(de),zc={left:0,top:0,bottom:0,right:0};function Ar(e){return Math.max(e,0)}const[Mr,kr]=h({contentSafeAreaInsets:zc,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:zc,stableHeight:0,width:0});function fe(e){return m(()=>kr()[e])}const Tt=fe("height"),Bt=fe("stableHeight"),Pr=fe("width"),Gc=fe("isExpanded"),Qc=m(()=>Tt()===Bt());function we(e){const{height:t,stableHeight:n,width:o}=e;Mr.set({...Mr(),...Ln({...e,height:t?Ar(t):void 0,width:o?Ar(o):void 0,stableHeight:n?Ar(n):void 0})}),N(de,Mr())}function Xp(){return I(de)}function qt(e){return m(()=>Ot()[e])}const Ot=fe("contentSafeAreaInsets"),Tr=qt("bottom"),Br=qt("left"),qr=qt("right"),Or=qt("top");function It(e){return m(()=>jt()[e])}const jt=fe("safeAreaInsets"),Ir=It("bottom"),jr=It("left"),Dr=It("right"),Nr=It("top"),Kc="web_app_request_safe_area",Jc=H(de,Kc),Vr=Jc("requestContentSafeAreaInsets",e=>S("web_app_request_content_safe_area",$r,e));function Yc(e){return S("web_app_request_viewport",Cr,e)}const Lr=Jc("requestSafeAreaInsets",e=>S(Kc,Sr,e)),Zc=e=>{const{height:t}=e;we({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},Xc=e=>{we({isFullscreen:e.is_fullscreen})},xc=e=>{we({safeAreaInsets:e})},eu=e=>{we({contentSafeAreaInsets:e})},[xp,ed,td,nd]=Te(de,e=>{const t=L()&&Xp();return t?C.resolve(t):C.fn(async n=>{const o=await C.all([Lr.isAvailable()?Lr(n):jt(),Vr.isAvailable()?Vr(n):Ot()]),s=Pe(),i={contentSafeAreaInsets:o[1],isFullscreen:!!s.tgWebAppFullscreen,safeAreaInsets:o[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(s.tgWebAppPlatform)){const a=window;return{...i,height:a.innerHeight,isExpanded:!0,stableHeight:a.innerHeight,width:a.innerWidth}}return Yc(n).then(a=>({...i,height:a.height,isExpanded:a.is_expanded,stableHeight:a.is_state_stable?a.height:0,width:a.width}))},e)},e=>{w(Cr,Zc),w(Er,Xc),w(Sr,xc),w($r,eu),we(e)}),tu=Wc("mount",xp),[,Hr,nu]=ed,[,ru]=td,[Rr,ou]=nd;function su(){ye(Hr),B(Cr,Zc),B(Er,Xc),B(Sr,xc),B($r,eu),Rr.set(!1)}const rd=st(de,Rr),[Fr,iu]=h(!1),au=rd("bindCssVars",e=>{if(Fr())throw new Ze;e||(e=n=>`--tg-viewport-${po(n)}`);const t=[["height",Tt],["stableHeight",Bt],["width",Pr],["safeAreaInsetTop",Nr],["safeAreaInsetBottom",Ir],["safeAreaInsetLeft",jr],["safeAreaInsetRight",Dr],["contentSafeAreaInsetTop",Or],["contentSafeAreaInsetBottom",Tr],["contentSafeAreaInsetLeft",Br],["contentSafeAreaInsetRight",qr]].reduce((n,[o,s])=>{const i=e(o);if(i){const a=()=>{Kn(i,`${s()}px`)};n.push([a,s.sub(a),i])}return n},[]);return t.forEach(n=>{n[0]()}),Fr.set(!0),()=>{t.forEach(n=>{n[1](),Jn(n[2])}),Fr.set(!1)}}),cu=Wc("expand",()=>{f("web_app_expand")}),uu="web_app_request_fullscreen",od=te(de,Rr,uu),Ur=fe("isFullscreen"),[sd,lu]=h(),[id,pu]=h();function du(e,t){return od(e,j(n=>S(t?uu:"web_app_exit_fullscreen",[Er,"fullscreen_failed"],n).then(o=>{if("error"in o&&o.error!=="ALREADY_FULLSCREEN")throw new ps(o.error);const s="is_fullscreen"in o?o.is_fullscreen:!0;s!==Ur()&&we({isFullscreen:s})}),"Fullscreen mode change is already being requested",{promise:sd,error:id})[0])}const fu=du("requestFullscreen",!0),mu=du("exitFullscreen"),ad=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:au,changeFullscreenError:pu,changeFullscreenPromise:lu,contentSafeAreaInsetBottom:Tr,contentSafeAreaInsetLeft:Br,contentSafeAreaInsetRight:qr,contentSafeAreaInsetTop:Or,contentSafeAreaInsets:Ot,exitFullscreen:mu,expand:cu,height:Tt,isCssVarsBound:iu,isExpanded:Gc,isFullscreen:Ur,isMounted:ou,isMounting:nu,isStable:Qc,mount:tu,mountError:ru,mountPromise:Hr,requestFullscreen:fu,safeAreaInsetBottom:Ir,safeAreaInsetLeft:jr,safeAreaInsetRight:Dr,safeAreaInsetTop:Nr,safeAreaInsets:jt,stableHeight:Bt,state:kr,unmount:su,width:Pr},Symbol.toStringTag,{value:"Module"})),_u="web_app_request_emoji_status_access",[cd,ud,ld]=j(e=>S(_u,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),pd=E("requestEmojiStatusAccess",cd,{isSupported:_u}),[,dd,fd]=ud,[,md]=ld,hu="web_app_set_emoji_status",[_d,hd,bd]=j((e,t)=>S(hu,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new ls(n.error)}),"Emoji status set request is currently in progress"),gd=E("setEmojiStatus",_d,{isSupported:hu}),[,yd,vd]=hd,[,wd]=bd,Ed={isSupported:"web_app_add_to_home_screen"},bu="home_screen_failed",Sd=E("onAddToHomeScreenFailed",(e,t)=>w(bu,e,t),{isSupported:"web_app_add_to_home_screen"}),$d=E("offAddToHomeScreenFailed",e=>{B(bu,e)},Ed),gu={isSupported:"web_app_add_to_home_screen"},yu="home_screen_added",Cd=E("onAddedToHomeScreen",(e,t)=>w(yu,e,t),gu),Ad=E("offAddedToHomeScreen",e=>{B(yu,e)},gu),vu="web_app_add_to_home_screen",Md=E("addToHomeScreen",()=>{f(vu)},{isSupported:vu}),wu="web_app_check_home_screen",[kd,Pd,Td]=j(e=>S(wu,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),Bd=E("checkHomeScreenStatus",kd,{isSupported:wu}),[,qd,Od]=Pd,[,Id]=Td,jd=ne()("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new U(`"${e.toString()}" is invalid URL`,n)}t||(t={}),f("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),Eu="web_app_open_tg_link",Su=ne()("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new U(`"${t}" is invalid URL`);if(!x(Eu,ee())){window.location.href=t;return}e=new URL(e),f(Eu,{path_full:e.pathname+e.search})}),Dd=ne()("shareURL",(e,t)=>{Su("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function Nd(e,t){return new C({abortSignal:t,timeout:e}).catch(()=>{})}const $u="web_app_request_phone",[Vd,Ld,Hd]=j(e=>S($u,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),Cu=E("requestPhoneAccess",Vd,{isSupported:$u}),[,Rd,Fd]=Ld,[,Ud]=Hd,Au={isSupported:"web_app_request_phone"};async function Mu(e){const t=Y($(),await se("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3}));return{raw:t,parsed:Y(me(eo([$(),Zr(URLSearchParams)]),en(D({contact:me($(),Ge(),D({user_id:$e(),phone_number:$(),first_name:$(),last_name:Ue($())})),auth_date:me($(),Ft(n=>new Date(Number(n)*1e3)),zt()),hash:$()}))),t)}}const[Wd,zd,Gd]=j(e=>new C(async(t,n,o)=>{try{return t(await Mu(o))}catch(a){if(a instanceof Rt)throw a}if(await Cu(o)!=="sent")throw new _n("User denied access");let i=50;for(;!o.isAborted();){try{return t(await Mu(o))}catch(a){if(a instanceof Rt)throw a}await Nd(i),i+=50}},e),"Contact is already being requested"),ku=E("requestContactComplete",Wd,Au),Qd=E("requestContact",e=>ku(e).then(t=>t.parsed),Au),[,Kd,Jd]=zd,[,Yd]=Gd,Pu="web_app_request_write_access",[Zd,Xd,xd]=j(e=>S(Pu,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),ef=E("requestWriteAccess",Zd,{isSupported:Pu}),[,tf,nf]=Xd,[,rf]=xd;function of(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function sf(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}of(e)}const Tu="web_app_request_file_download",af=E("downloadFile",(e,t,n)=>S(Tu,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(o=>{if(o.status!=="downloading")throw new _n("User denied the action")}),{isSupported:Tu}),cf=E("getCurrentTime",e=>se("getCurrentTime",{},e).then(t=>Y(me($e(),Kr(),Ft(n=>new Date(n*1e3)),zt()),t)),{isSupported:"web_app_invoke_custom_method"}),Bu="web_app_read_text_from_clipboard",uf=E("readTextFromClipboard",e=>{const t=fn();return S(Bu,"clipboard_text_received",{...e,params:{req_id:t},capture:ns(t)}).then(({data:n=null})=>n)},{isSupported:Bu}),qu="web_app_data_send",lf=E("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new U(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");f(qu,{data:e})},{isSupported:qu}),Ou="web_app_send_prepared_message",pf=E("shareMessage",(e,t)=>S(Ou,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new ds(n.error)}),{isSupported:Ou}),Iu="web_app_share_to_story",df=E("shareStory",(e,t)=>{t||(t={}),f(Iu,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:Iu}),ff="web_app_switch_inline_query",mf=E("switchInlineQuery",(e,t)=>{f(ff,{query:e,chat_types:t||[]})},{isSupported(){return Pe().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}});function _f(e){try{return[!0,e()]}catch(t){return[!1,t]}}function hf(e){cs(e);const[t,n]=We(w("reload_iframe",()=>{pn(!1,"Received a request to reload the page"),f("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:o=!0}=e||{};if(o){const s=document.createElement("style");s.id="telegram-custom-styles",document.head.appendChild(s),t(w("set_custom_style",i=>{s.innerHTML=i}),()=>{document.head.removeChild(s)})}return f("iframe_ready",{reload_supported:!0}),pn(!1,"The package was initialized"),n}return r.AbortablePromise=C,r.AccessDeniedError=_n,r.CSSVarsBoundError=Ze,r.CancelledError=ro,r.ConcurrentCallError=us,r.FullscreenFailedError=ps,r.FunctionUnavailableError=ge,r.InvalidArgumentsError=U,r.InvalidEnvError=Nl,r.InvalidLaunchParamsError=Ko,r.InvokeCustomMethodError=Yo,r.LaunchParamsRetrieveError=Qo,r.ManualPromise=lo,r.MethodParameterUnsupportedError=Go,r.MethodUnsupportedError=zo,r.NotAvailableError=mn,r.SetEmojiStatusError=ls,r.ShareMessageError=ds,r.TimeoutError=so,r.UnknownEnvError=Jo,r.UnknownThemeParamsKeyError=Xe,r.addToHomeScreen=Md,r.authenticateBiometry=Vs,r.backButton=Ql,r.bindMiniAppCssVars=ja,r.bindThemeParamsCssVars=ga,r.bindViewportCssVars=au,r.biometry=op,r.biometryAuthError=Hs,r.biometryAuthPromise=Cn,r.biometryMountError=Ds,r.biometryState=Cs,r.changeFullscreenError=pu,r.changeFullscreenPromise=lu,r.checkHomeScreenStatus=Bd,r.checkHomeScreenStatusError=Id,r.checkHomeScreenStatusPromise=qd,r.closeMiniApp=Da,r.closeQrScanner=oc,r.closingBehavior=ip,r.cloudStorage=up,r.configure=cs,r.copyTextToClipboard=sf,r.createPostEvent=os,r.createRequestId=fn,r.deleteCloudStorageItem=Tn,r.disableClosingConfirmation=Ys,r.disableVerticalSwipes=Hc,r.downloadFile=af,r.emitEvent=on,r.enableClosingConfirmation=Zs,r.enableVerticalSwipes=Rc,r.exitFullscreen=mu,r.expandViewport=cu,r.getCloudStorageItem=ni,r.getCloudStorageKeys=Bn,r.getCurrentTime=cf,r.hapticFeedback=lp,r.hapticFeedbackImpactOccurred=si,r.hapticFeedbackNotificationOccurred=ii,r.hapticFeedbackSelectionChanged=ai,r.hideBackButton=ys,r.hideSettingsButton=Tc,r.ignoreCanceled=vn,r.init=hf,r.initData=dp,r.initDataAuthDate=On,r.initDataCanSendAfter=In,r.initDataCanSendAfterDate=li,r.initDataChat=pi,r.initDataChatInstance=fi,r.initDataChatType=di,r.initDataHash=mi,r.initDataQueryId=_i,r.initDataRaw=hi,r.initDataReceiver=bi,r.initDataStartParam=yi,r.initDataState=ui,r.initDataUser=vi,r.invoice=gp,r.invokeCustomMethod=se,r.isAccessDeniedError=Ul,r.isAuthenticatingBiometry=Ls,r.isBackButtonMounted=hs,r.isBackButtonSupported=bs,r.isBackButtonVisible=_s,r.isBiometryAvailable=As,r.isBiometryMounted=Ns,r.isBiometryMounting=js,r.isBiometrySupported=Bs,r.isCSSVarsBoundError=jl,r.isCancelledError=oo,r.isCheckingHomeScreenStatus=Od,r.isClosingBehaviorMounted=kn,r.isClosingConfirmationEnabled=Ks,r.isCloudStorageSupported=ti,r.isColorDark=Hn,r.isConcurrentCallError=Rl,r.isFullscreen=Ur,r.isFullscreenFailedError=Wl,r.isFunctionNotAvailableError=Ll,r.isHapticFeedbackSupported=oi,r.isInvalidArguments=Hl,r.isInvalidEnvError=Vl,r.isInvalidLaunchParamsError=Ml,r.isInvoiceOpened=$i,r.isInvoiceSupported=wi,r.isInvokeCustomMethodError=Pl,r.isLaunchParamsRetrieveError=Al,r.isLocationManagerAccessGranted=Pi,r.isLocationManagerAccessRequested=Ti,r.isLocationManagerAvailable=ki,r.isLocationManagerMounted=Ni,r.isLocationManagerMounting=ji,r.isLocationManagerSupported=Mi,r.isMainButtonEnabled=oa,r.isMainButtonLoaderVisible=sa,r.isMainButtonMounted=Gn,r.isMainButtonVisible=ia,r.isMethodMethodParameterUnsupportedError=Cl,r.isMethodUnsupportedError=$l,r.isMiniAppActive=Pa,r.isMiniAppCssVarsBound=Ma,r.isMiniAppDark=ka,r.isMiniAppMounted=Ha,r.isMiniAppMounting=Va,r.isMiniAppSupported=Ta,r.isNotAvailableError=Dl,r.isPopupOpened=Ya,r.isPopupShown=ec,r.isPopupSupported=za,r.isQrScannerOpened=ac,r.isQrScannerSupported=sc,r.isRGB=oe,r.isRGBShort=Bo,r.isRequestingBiometryAccess=Us,r.isRequestingContact=Jd,r.isRequestingEmojiStatusAccess=fd,r.isRequestingLocation=Li,r.isRequestingPhoneAccess=Fd,r.isRequestingWriteAccess=nf,r.isSSR=hn,r.isSecondaryButtonEnabled=pc,r.isSecondaryButtonLoaderVisible=dc,r.isSecondaryButtonMounted=hr,r.isSecondaryButtonSupported=gc,r.isSecondaryButtonVisible=fc,r.isSetEmojiStatusError=Fl,r.isSettingEmojiStatus=vd,r.isSettingsButtonMounted=Mc,r.isSettingsButtonSupported=kc,r.isSettingsButtonVisible=Ac,r.isShareMessageError=zl,r.isSwipeBehaviorMounted=Dc,r.isSwipeBehaviorSupported=Nc,r.isTMA=ln,r.isThemeParamsCssVarsBound=Ui,r.isThemeParamsDark=Ji,r.isThemeParamsMounted=wa,r.isThemeParamsMounting=ya,r.isTimeoutError=Qu,r.isUnknownEnvError=kl,r.isUnknownThemeParamsKeyError=Gl,r.isVerticalSwipesEnabled=Vc,r.isViewportCssVarsBound=iu,r.isViewportExpanded=Gc,r.isViewportMounted=ou,r.isViewportMounting=nu,r.isViewportStable=Qc,r.locationManager=kp,r.locationManagerMountError=Di,r.locationManagerMountPromise=Ii,r.mainButton=Bp,r.mainButtonBackgroundColor=na,r.mainButtonHasShineEffect=ra,r.mainButtonState=ut,r.mainButtonText=aa,r.mainButtonTextColor=ca,r.miniApp=Np,r.miniAppBackgroundColor=$a,r.miniAppBackgroundColorRGB=dt,r.miniAppBottomBarColor=Ca,r.miniAppBottomBarColorRGB=ft,r.miniAppHeaderColor=Aa,r.miniAppHeaderColorRGB=nr,r.miniAppMountError=La,r.miniAppMountPromise=ur,r.miniAppReady=Fa,r.miniAppState=or,r.mockTelegramEnv=Tl,r.mountBackButton=vs,r.mountBiometry=Is,r.mountBiometryPromise=$n,r.mountClosingBehavior=Xs,r.mountLocationManager=Oi,r.mountMainButton=la,r.mountMiniApp=Na,r.mountMiniAppSync=Ra,r.mountSecondaryButton=yc,r.mountSettingsButton=Bc,r.mountSwipeBehavior=Fc,r.mountThemeParams=Xn,r.mountThemeParamsSync=tr,r.mountViewport=tu,r.off=B,r.offAddToHomeScreenFailed=$d,r.offAddedToHomeScreen=Ad,r.offBackButtonClick=Es,r.offMainButtonClick=da,r.offSecondaryButtonClick=wc,r.offSettingsButtonClick=Oc,r.on=w,r.onAddToHomeScreenFailed=Sd,r.onAddedToHomeScreen=Cd,r.onBackButtonClick=ws,r.onMainButtonClick=pa,r.onSecondaryButtonClick=vc,r.onSettingsButtonClick=qc,r.openBiometrySettings=Rs,r.openInvoice=Ei,r.openInvoiceError=Ci,r.openInvoicePromise=Si,r.openLink=jd,r.openLocationManagerSettings=Ri,r.openPopup=Ka,r.openPopupError=Za,r.openPopupPromise=Ja,r.openQrScanner=ic,r.openQrScannerError=cc,r.openQrScannerPromise=mr,r.openTelegramLink=Su,r.parseInitDataQuery=pl,r.parseLaunchParamsQuery=Qe,r.popup=Lp,r.postEvent=f,r.postMessage=Zo,r.postMessageImplementation=ke,r.qrScanner=Gp,r.readTextFromClipboard=uf,r.request=S,r.requestBiometry=ks,r.requestBiometryAccess=Fs,r.requestBiometryAccessError=Ws,r.requestBiometryAccessPromise=An,r.requestContact=Qd,r.requestContactComplete=ku,r.requestContactError=Yd,r.requestContactPromise=Kd,r.requestContentSafeAreaInsets=Vr,r.requestEmojiStatusAccess=pd,r.requestEmojiStatusAccessError=md,r.requestEmojiStatusAccessPromise=dd,r.requestFullscreen=fu,r.requestLocation=Vi,r.requestLocationError=Hi,r.requestLocationPromise=Vn,r.requestPhoneAccess=Cu,r.requestPhoneAccessError=Ud,r.requestPhoneAccessPromise=Rd,r.requestSafeAreaInsets=Lr,r.requestViewport=Yc,r.requestWriteAccess=ef,r.requestWriteAccessError=rf,r.requestWriteAccessPromise=tf,r.restoreInitData=gi,r.retrieveLaunchParams=Ye,r.retrieveRawInitData=ts,r.retrieveRawLaunchParams=un,r.safeCall=_f,r.secondaryButton=Kp,r.secondaryButtonBackgroundColor=uc,r.secondaryButtonHasShineEffect=lc,r.secondaryButtonPosition=mc,r.secondaryButtonState=Et,r.secondaryButtonText=_c,r.secondaryButtonTextColor=hc,r.sendData=lf,r.serializeInitDataQuery=No,r.serializeLaunchParamsQuery=Vo,r.serializeToQuery=nn,r.setCloudStorageItem=ri,r.setDebug=Il,r.setEmojiStatus=gd,r.setEmojiStatusError=wd,r.setEmojiStatusPromise=yd,r.setMainButtonParams=fa,r.setMiniAppBackgroundColor=yt,r.setMiniAppBottomBarColor=vt,r.setMiniAppHeaderColor=wt,r.setSecondaryButtonParams=Ec,r.settingsButton=Jp,r.shareMessage=pf,r.shareStory=df,r.shareURL=Dd,r.showBackButton=Ss,r.showPopup=Xa,r.showPopupError=tc,r.showPopupPromise=xa,r.showSettingsButton=Ic,r.supports=x,r.swipeBehavior=Zp,r.switchInlineQuery=mf,r.targetOrigin=Xo,r.themeParams=Ip,r.themeParamsAccentTextColor=Wi,r.themeParamsBackgroundColor=Fn,r.themeParamsBottomBarBgColor=zi,r.themeParamsButtonColor=ct,r.themeParamsButtonTextColor=Un,r.themeParamsDestructiveTextColor=Gi,r.themeParamsHeaderBackgroundColor=Qi,r.themeParamsHintColor=Ki,r.themeParamsLinkColor=Yi,r.themeParamsMountError=va,r.themeParamsMountPromise=xn,r.themeParamsSecondaryBackgroundColor=Wn,r.themeParamsSectionBackgroundColor=Zi,r.themeParamsSectionHeaderTextColor=Xi,r.themeParamsSectionSeparatorColor=xi,r.themeParamsState=ce,r.themeParamsSubtitleTextColor=ea,r.themeParamsTextColor=ta,r.toRGB=qo,r.transformQueryUsing=en,r.unmountBackButton=$s,r.unmountBiometry=zs,r.unmountClosingBehavior=xs,r.unmountLocationManager=Fi,r.unmountMainButton=ma,r.unmountMiniApp=Ua,r.unmountSecondaryButton=Sc,r.unmountSettingsButton=jc,r.unmountSwipeBehavior=Uc,r.unmountThemeParams=Ea,r.unmountViewport=su,r.updateBiometryToken=Gs,r.viewport=ad,r.viewportContentSafeAreaInsetBottom=Tr,r.viewportContentSafeAreaInsetLeft=Br,r.viewportContentSafeAreaInsetRight=qr,r.viewportContentSafeAreaInsetTop=Or,r.viewportContentSafeAreaInsets=Ot,r.viewportHeight=Tt,r.viewportMountError=ru,r.viewportMountPromise=Hr,r.viewportSafeAreaInsetBottom=Ir,r.viewportSafeAreaInsetLeft=jr,r.viewportSafeAreaInsetRight=Dr,r.viewportSafeAreaInsetTop=Nr,r.viewportSafeAreaInsets=jt,r.viewportStableHeight=Bt,r.viewportState=kr,r.viewportWidth=Pr,r.wrapSafe=E,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r}({});
//# sourceMappingURL=index.iife.js.map
